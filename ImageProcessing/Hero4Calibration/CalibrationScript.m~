load calibration.mat
polyfit(X(:,1),X(:,2),2);

% First column of X is meters
% Second column of X is pixel distance
% Third column of X is predicted with 2-order fit
% Fourth column of X is residual with 2-order fit

% Fifth and six are predicted and residual with 1-order fit


% What we want is a polynomial mapping from pixels to meters
% x = pixels
% y = meters


% First order

p = polyfit(X(:,2),X(:,1),1);

p1 = p(1);
p0 = p(2);

for i = 1:7

  X(i,3) = p1*X(i,2) + p0;
  X(i,4) = X(i,3) - X(i,1);
  
end

% Plot residuals

figure
plot(X(:,1),X(:,4),'.')
title('1st order residuals')
xlabel('meters') % x-axis label
ylabel('sine and cosine value') % y-axis label





% Second order

p = polyfit(X(:,2),X(:,1),2);

p2 = p(1);
p1 = p(2);
p0 = p(3);

for i = 1:7

  X(i,5) = p2*X(i,2)^2 + p1*X(i,2) + p0;
  X(i,6) = X(i,5) - X(i,1);
  
end

% Plot residuals

figure
plot(X(:,1),X(:,6),'.')
title('2nd order residuals')




save calibration.mat
